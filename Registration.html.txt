<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Register</title>
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
  <h2>Registering...</h2>
  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbyeENoK1cB99YblIvqQ_fdpn9hRqKfb1rnRQmYWfAGwA8U5pYxs_OysHuXcmcQ-utEvDg/exec"; // à¹ƒà¸ªà¹ˆ URL à¸ˆà¸²à¸ Apps Script

    liff.init({ liffId: "YOUR_LIFF_ID" })
      .then(() => {
        if (!liff.isLoggedIn()) {
          liff.login();
        } else {
          liff.getProfile().then(profile => {
            const userId = profile.userId;
            const name = profile.displayName;

            fetch(scriptURL, {
              method: 'POST',
              mode: 'no-cors',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ userId, name })
            }).then(() => {
              document.body.innerHTML = `<h2>Registration Complete ðŸŽ‰</h2><p>Thanks, ${name}!</p>`;
              setTimeout(() => { liff.closeWindow(); }, 3000);
            });
          });
        }
      });
  </script>
</body>
</html>
